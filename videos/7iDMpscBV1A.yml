# Contribution guide: https://github.com/watch-devtube/contrib

# speaker:
#   name: _____
#   twitter: _____ # mandatory twitter handle; must not include @

# tags: [____, _____, _____]

tags:
    - unix
    - security
    - architecture
    - rust
title: 'What you most likely did not know about sudo…'
language: English
recordingDate: 1598601828
description: "by Peter Czanik\n\nAt: FOSDEM 2020\nhttps://video.fosdem.org/2020/UA2.114/security_what_you_most_likely_did_not_know_about_sudo.webm\n\nEverybody knows sudo, right? Sudo allows a system administrator to give certain users  the ability to run some commands as root, while logging the executed commands and their arguments. It is installed by default on almost all Linux systems, and is available for most commercial UNIX systems. Still, even system administrators often only know it is the “prefix” to use before entering a command requiring root privileges. Learn how much more this simple looking tool can do!\nEverybody knows sudo, right? Sudo allows a system administrator to give certain users  the ability to run some commands as root, while logging the executed commands and their arguments. It is installed by default on almost all Linux systems, and is available for most commercial UNIX systems. Still, even system administrators often only know it is the “prefix” to use before entering a command requiring root privileges. Learn how much more this simple looking tool can do!\nMost of the times the default configuration allows a group of users to run any commands:\n%wheel  ALL=(ALL)   ALL\nIt’s a good first step, better than using the root account directly. This way you can trace who ran what commands on the system. But there are a lot more possibilities when configuring sudo, making your system more secure.\nLife is simple when when you have to give access a single user to a single command. But as soon as  you have multiple users with the same access rights, it is not just shorter but also easier to maintain, if you use aliases.\nFor added security, you can add a hash of binaries to sudo. This way if the binary changes for any reasons, like modifying it through a successful exploit, you can prevent it from being used.\n\n\nUsing sudo does not make much sense without proper logging and alerting. There are three major possibilities:\n- syslog: all events are logged to syslog. For additional security, collect sudo logs  centrally, so a malicious user cannot delete them easily.\n- e-mail: sudo can send e-mail alerts on different kinds of failures\n- debug: in depth logging of subsystems, mostly useful for developers\nSession recording is a fourth possibility. The terminal output can be saved in a local file and played back. You can play back what happened, even if the user started up an interactive shell.\n\n\nInstead of maintaining the sudoers file on each of your systems, you can use LDAP to configure sudo. It has some differences compared to a sudoers file, but also many advantages:\n- local users cannot manipulate the rules,\n- is easier to maintain,\n- goes live immediately.\n\n\nStarting with version 1.8, sudo has a plugin-based architecture. You can replace or extend sudo functionality using plugins. This way users can keep starting applications the usual way using sudo, but have a different configuration or policy engine behind the sudo command. There are both open source and commercial plugins available. For example the sudo_pair plugin – developed in Rust – enables monitoring and makes it possible to require interactive approval of sessions.\n\n\nAs you can see, sudo has several lesser-known features that can make monitoring and access management easier for large organizations.\n\nRoom: UA2.114 (Baudoux)\nScheduled start: 2020-02-01 17:00:00"
